doctype html
html(lang='en')
  head
    title Dashboard - PicoBudget - Expense tracking tool
    include includes/head.jade
  body
    include includes/dashboard_nav.jade
    .container
      section#content
        .row
          include includes/dashboard_sidebar.jade

          .span10
            .alert-success.alert#registeredInfo
              strong Welcome!
              br
              p Your registration was successfull. You will receive a confirmation email in the next few minutes.
            h1 Account Overview
            p You can manage your accounts under
              a(href='/accounts') "Accounts"
              | .
            - if (locals.accounts.length > 0)
              table.table
                thead
                  tr
                    th Name
                    th Currency
                    th(style='text-align:right;') Balance
                tbody
                  for account in locals.accounts
                    tr
                      td #{account.name}
                      td #{account.curr}
                      td(style='text-align:right;') #{locals.formatAmount(account.bal)}
            - else
              p There are no accounts to be displayed.
            hr
            h1 Recent transactions
            - if (locals.transactions.length > 0)
              table.table
                thead
                  tr
                    th Date
                    th Account
                    th Descrition
                    th +/-
                    th Tags
                    th(style='text-align:right;') Amount
                tbody
                  for trans in locals.transactions
                    tr
                      td #{trans.date}
                      td #{trans.acc}
                      td #{trans.name}
                      td #{trans.art}
                      td #{trans.tags}
                      td(style='text-align:right;') #{locals.formatAmount(trans.amount)}
            - else
              p There are no transactions to be displayed.

      include includes/footer.jade
    include includes/libs.jade

    script(type='text/javascript')
      // hide all notifications which should not be displayed
      if (typeof($.getUrlVar('registered')) == 'undefined')
        $('#registeredInfo').hide();
